{
  "totalTests": 48,
  "passed": 27,
  "failed": 3,
  "tests": [
    {
      "test": "System Health Check",
      "endpoint": "/api/test-system",
      "method": "GET",
      "status": 200,
      "duration": 1653,
      "response": {
        "timestamp": "2025-10-02T03:47:16.549Z",
        "tests": {
          "mongodb": {
            "status": "PASS",
            "connected": true,
            "database": "test",
            "host": "ac-2zirzz7-shard-00-01.iyjjbdt.mongodb.net",
            "readyState": 1,
            "message": "MongoDB connected successfully"
          },
          "redis": {
            "status": "PASS",
            "connected": true,
            "writeSuccess": true,
            "readSuccess": true,
            "deleteSuccess": true,
            "dataIntegrity": true,
            "expectedValue": "test-data-1759376836549",
            "retrievedValue": "test-data-1759376836549",
            "message": "Redis working perfectly"
          },
          "environment": {
            "status": "PASS",
            "variables": {
              "MONGODB_URI": "CONFIGURED",
              "NEXTAUTH_SECRET": "CONFIGURED",
              "NEXTAUTH_URL": "CONFIGURED",
              "GOOGLE_CLIENT_ID": "CONFIGURED",
              "GOOGLE_CLIENT_SECRET": "CONFIGURED",
              "UPSTASH_REDIS_REST_URL": "CONFIGURED",
              "UPSTASH_REDIS_REST_TOKEN": "CONFIGURED",
              "CLOUDINARY_CLOUD_NAME": "CONFIGURED",
              "CLOUDINARY_API_KEY": "CONFIGURED",
              "CLOUDINARY_API_SECRET": "CONFIGURED",
              "ABLY_CONFIGURED": "CONFIGURED"
            },
            "totalRequired": 10,
            "configured": 11,
            "missing": 0,
            "message": "All environment variables configured"
          }
        },
        "overall": "PASS",
        "summary": {
          "totalTests": 3,
          "passed": 3,
          "failed": 0,
          "message": "✅ All systems operational"
        }
      }
    },
    {
      "test": "Ably Configuration Check",
      "endpoint": "/api/check-ably",
      "method": "GET",
      "status": 200,
      "duration": 160,
      "response": {
        "configuredKeys": {
          "ABLY_ROOT_KEY": "CONFIGURED",
          "NEXT_PUBLIC_ABLY_CLIENT_KEY": "CONFIGURED",
          "ABLY_API_KEY": "MISSING",
          "NEXT_PUBLIC_ABLY_KEY": "MISSING"
        },
        "keyPreviews": {
          "ABLY_ROOT_KEY": "lpccOQ.Bp6qoA:sNx_io...",
          "NEXT_PUBLIC_ABLY_CLIENT_KEY": "lpccOQ.Hiseag:sXttnH..."
        },
        "hasServerKey": true,
        "hasClientKey": true,
        "fullyConfigured": true,
        "message": "✅ Ably fully configured"
      }
    },
    {
      "test": "Check Username - Valid Format",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 717,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Check Username - Already Taken",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 324,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Check Username - Too Short",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 309,
      "response": {
        "available": false,
        "message": "Username must be at least 3 characters"
      }
    },
    {
      "test": "Check Username - Special Characters",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 308,
      "response": {
        "available": false,
        "message": "Username can only contain lowercase letters, numbers, and underscores (no spaces, uppercase letters, or special characters)"
      }
    },
    {
      "test": "Check Username - Reserved Word",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 406,
      "response": {
        "available": false,
        "message": "Username already taken"
      }
    },
    {
      "test": "Check Username - Missing Field",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 400,
      "duration": 410,
      "response": {
        "available": false,
        "message": "Field value and type are required"
      }
    },
    {
      "test": "Rate Limit Test 1/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 232,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 2/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 297,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 3/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 195,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 4/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 201,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 5/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 264,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 6/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 212,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 7/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 193,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 8/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 246,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 9/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 306,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 10/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 304,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 11/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 289,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 12/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 222,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 13/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 409,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 14/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 409,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 15/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 511,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 16/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 309,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 17/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 303,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 18/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 306,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 19/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 307,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 20/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 307,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 21/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 307,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 22/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 236,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 23/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 374,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 24/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 200,
      "duration": 409,
      "response": {
        "available": false,
        "message": "Invalid username"
      }
    },
    {
      "test": "Rate Limit Test 25/35",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 429,
      "duration": 273,
      "response": {
        "available": false,
        "message": "Too many validation requests. Please try again later.",
        "resetTime": "2025-10-02T03:48:18.664Z"
      }
    },
    {
      "test": "Username Suggestions",
      "endpoint": "/api/auth/check-username?base=newuser",
      "method": "GET",
      "status": 200,
      "duration": 29,
      "response": {
        "suggestions": [],
        "message": "Invalid username"
      }
    },
    {
      "test": "Get User Profile - Public",
      "endpoint": "/api/user/profile/testhirer",
      "method": "GET",
      "status": 200,
      "duration": 1947,
      "response": {
        "success": true,
        "user": {
          "_id": "68dd6f95868fa1b000303e8b",
          "name": "Test Hirer User",
          "username": "testhirer",
          "usernameChangeCount": 0,
          "authMethod": "email",
          "providers": [],
          "role": "hirer",
          "isRegistered": false,
          "isVerified": true,
          "emailVerified": true,
          "phoneVerified": false,
          "banned": false,
          "banDetails": {
            "appeal": {
              "submitted": false,
              "evidence": [],
              "status": "pending"
            },
            "type": "temporary",
            "bannedByRole": "admin",
            "bannedAt": "2025-10-01T18:14:45.556Z",
            "warnings": [],
            "previousBans": []
          },
          "location": {
            "homeAddress": {
              "setAt": "2025-10-01T18:14:45.556Z"
            },
            "source": "gps",
            "timestamp": "2025-10-01T18:14:45.556Z"
          },
          "locationTracking": {
            "permissions": {
              "precise": false,
              "background": false
            },
            "preferences": {
              "onlyWhenActive": true,
              "lowPowerMode": false,
              "autoDisableAfterInactivity": true,
              "inactivityThreshold": 7
            },
            "isEnabled": false,
            "updateInterval": 30
          },
          "profilePhoto": {
            "dimensions": {
              "width": null,
              "height": null
            },
            "url": null,
            "cloudinaryPublicId": null,
            "lastUpdated": null,
            "originalName": null,
            "fileSize": null
          },
          "picture": null,
          "bio": "",
          "website": "",
          "experience": "",
          "skills": [],
          "availableNow": true,
          "serviceRadius": 10,
          "responseTime": "1",
          "workingHours": {
            "start": "09:00",
            "end": "18:00"
          },
          "workingDays": [
            "monday",
            "tuesday",
            "wednesday",
            "thursday",
            "friday"
          ],
          "autoApply": false,
          "emergencyAvailable": false,
          "plan": {
            "type": "free",
            "status": "active",
            "creditsUsed": 0
          },
          "jobsPosted": 0,
          "jobsCompleted": 0,
          "totalEarnings": 0,
          "rating": {
            "distribution": {
              "1": 0,
              "2": 0,
              "3": 0,
              "4": 0,
              "5": 0
            },
            "fixerRatings": {
              "communication": 0,
              "quality": 0,
              "timeliness": 0,
              "professionalism": 0
            },
            "hirerRatings": {
              "clarity": 0,
              "responsiveness": 0,
              "paymentTimeliness": 0,
              "professionalism": 0
            },
            "average": 0,
            "count": 0
          },
          "badges": [],
          "isActive": true,
          "registrationMetadata": {
            "deviceInfo": {
              "type": "unknown"
            },
            "source": "web_signup"
          },
          "locationHistory": [],
          "portfolio": [],
          "lastActivityAt": "2025-10-01T18:14:45.560Z",
          "stats": {
            "reviews": {
              "average": 0,
              "total": 0,
              "distribution": {
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
                "5": 0
              }
            }
          },
          "recentReviews": []
        }
      }
    },
    {
      "test": "Check Email - New",
      "endpoint": "/api/user/check-email",
      "method": "POST",
      "status": 401,
      "duration": 273,
      "response": {
        "message": "Authentication required"
      }
    },
    {
      "test": "Browse Jobs - Public",
      "endpoint": "/api/jobs/browse?page=1&limit=10",
      "method": "GET",
      "status": 200,
      "duration": 548,
      "response": {
        "success": true,
        "jobs": [],
        "pagination": {
          "page": 1,
          "limit": 10,
          "total": 0,
          "pages": 0
        }
      }
    },
    {
      "test": "Job Statistics",
      "endpoint": "/api/jobs/stats",
      "method": "GET",
      "status": 200,
      "duration": 2558,
      "response": {
        "total": 0,
        "urgent": 0,
        "nearby": 0,
        "trending": [],
        "activeUsers": 0,
        "lastUpdated": "2025-10-02T03:47:32.428Z"
      }
    },
    {
      "test": "Performance - System Health",
      "endpoint": "/api/test-system",
      "method": "GET",
      "status": 200,
      "duration": 815,
      "response": {
        "timestamp": "2025-10-02T03:47:33.296Z",
        "tests": {
          "mongodb": {
            "status": "PASS",
            "connected": true,
            "database": "test",
            "host": "ac-2zirzz7-shard-00-01.iyjjbdt.mongodb.net",
            "readyState": 1,
            "message": "MongoDB connected successfully"
          },
          "redis": {
            "status": "PASS",
            "connected": true,
            "writeSuccess": true,
            "readSuccess": true,
            "deleteSuccess": true,
            "dataIntegrity": true,
            "expectedValue": "test-data-1759376853297",
            "retrievedValue": "test-data-1759376853297",
            "message": "Redis working perfectly"
          },
          "environment": {
            "status": "PASS",
            "variables": {
              "MONGODB_URI": "CONFIGURED",
              "NEXTAUTH_SECRET": "CONFIGURED",
              "NEXTAUTH_URL": "CONFIGURED",
              "GOOGLE_CLIENT_ID": "CONFIGURED",
              "GOOGLE_CLIENT_SECRET": "CONFIGURED",
              "UPSTASH_REDIS_REST_URL": "CONFIGURED",
              "UPSTASH_REDIS_REST_TOKEN": "CONFIGURED",
              "CLOUDINARY_CLOUD_NAME": "CONFIGURED",
              "CLOUDINARY_API_KEY": "CONFIGURED",
              "CLOUDINARY_API_SECRET": "CONFIGURED",
              "ABLY_CONFIGURED": "CONFIGURED"
            },
            "totalRequired": 10,
            "configured": 11,
            "missing": 0,
            "message": "All environment variables configured"
          }
        },
        "overall": "PASS",
        "summary": {
          "totalTests": 3,
          "passed": 3,
          "failed": 0,
          "message": "✅ All systems operational"
        }
      }
    },
    {
      "test": "Performance - Check Username",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 429,
      "duration": 282,
      "response": {
        "available": false,
        "message": "Too many validation requests. Please try again later.",
        "resetTime": "2025-10-02T03:48:18.109Z"
      }
    },
    {
      "test": "Performance - Browse Jobs",
      "endpoint": "/api/jobs/browse?page=1&limit=10",
      "method": "GET",
      "status": 200,
      "duration": 432,
      "response": {
        "success": true,
        "jobs": [],
        "pagination": {
          "page": 1,
          "limit": 10,
          "total": 0,
          "pages": 0
        }
      }
    },
    {
      "test": "Dashboard Stats - Cache MISS",
      "endpoint": "/api/dashboard/stats",
      "method": "GET",
      "status": 401,
      "duration": 452,
      "response": {
        "message": "Authentication required"
      }
    },
    {
      "test": "Dashboard Stats - Cache HIT",
      "endpoint": "/api/dashboard/stats",
      "method": "GET",
      "status": 401,
      "duration": 32,
      "response": {
        "message": "Authentication required"
      }
    },
    {
      "test": "Security - SQL Injection",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 429,
      "duration": 231,
      "response": {
        "available": false,
        "message": "Too many validation requests. Please try again later.",
        "resetTime": "2025-10-02T03:48:18.308Z"
      }
    },
    {
      "test": "Security - XSS Attempt",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 429,
      "duration": 306,
      "response": {
        "available": false,
        "message": "Too many validation requests. Please try again later.",
        "resetTime": "2025-10-02T03:48:18.541Z"
      }
    },
    {
      "test": "Validation - Long Input",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 429,
      "duration": 307,
      "response": {
        "available": false,
        "message": "Too many validation requests. Please try again later.",
        "resetTime": "2025-10-02T03:48:17.838Z"
      }
    },
    {
      "test": "Validation - Empty Request",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 429,
      "duration": 313,
      "response": {
        "available": false,
        "message": "Too many validation requests. Please try again later.",
        "resetTime": "2025-10-02T03:48:18.148Z"
      }
    },
    {
      "test": "Validation - Malformed JSON",
      "endpoint": "/api/auth/check-username",
      "method": "POST",
      "status": 429,
      "duration": 401,
      "response": {
        "available": false,
        "message": "Too many validation requests. Please try again later.",
        "resetTime": "2025-10-02T03:48:18.468Z"
      }
    }
  ],
  "issues": [
    {
      "test": "Email Check",
      "assertion": "Email check endpoint exists"
    },
    {
      "test": "Empty Request",
      "assertion": "Returns 400 for empty request"
    },
    {
      "test": "Malformed JSON",
      "assertion": "Handles malformed JSON gracefully"
    }
  ]
}